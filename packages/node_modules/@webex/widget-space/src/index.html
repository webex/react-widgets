
<!DOCTYPE html>
<html>
<head>
  <title>Space Widget Demo</title>
  <meta charset="utf8"/>
</head>
<body>
<div style="float: left;">
  <h2>Space Widget</h2>
  <p>
    <label for="accessTokenInput">Access Token</label>
    <input type="password" placeholder="access token" id="accessTokenInput" value="<%= process.env.WEBEX_ACCESS_TOKEN %>" />
  </p>
  <p>
    <label for="destinationInput">Destination ID</label>
    <input id="destinationInput"/>
  </p>
  <p>
    <label for="destinationTypeInput">Destination Type</label>
    <select id="destinationTypeInput">
        <option value="">--Please choose an option--</option>
        <option value="email">email</option>
        <option value="userId">userId</option>
        <option value="spaceId">spaceId</option>
        <option value="sip">sip</option>
        <option value="pstn">pstn</option>
    </select>
  </p>
  <button onClick="createWidget()">Create Widget</button>
  <button onClick="removeWidget()">Remove Widget</button>
  <div style="width: 500px; height: 500px;">
    <div id="webex-widget-global"></div>
  </div>
  <div>Event: <span id="widget-events"></span></div>
</div>

<script type="text/javascript">
var widgetEl = document.getElementById('webex-widget-global');
var widgetEventsEl = document.getElementById('widget-events');
var accessTokenInput = document.getElementById('accessTokenInput');
var destinationInput = document.getElementById('destinationInput');
var destinationTypeInput = document.getElementById('destinationTypeInput');
function createWidget() {
  var widget = window.ciscospark.widget(widgetEl);
  widget.spaceWidget({
    accessToken: accessTokenInput.value,
    destinationId: destinationInput.value,
    destinationType: destinationTypeInput.value,
    onEvent: function(name, data) {
      widgetEventsEl.innerText = name+'\n'+JSON.stringify(data, null, 2);
      console.log(data);
    }
  });
}

function removeWidget() {
  var widget = ciscospark.widget(widgetEl);
  if (widget.remove) {
    widget.remove();
  }
}

</script>

</body>
</html>
