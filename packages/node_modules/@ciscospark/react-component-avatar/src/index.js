import React, {PropTypes} from 'react';
import classNames from 'classnames';
import Icon, {ICON_TYPE_MESSAGE} from '@ciscospark/react-component-icon';
import styles from './styles.css';

function Avatar({name, image, isSelfAvatar, size}) {
  let avatarClass, avatarContents, backgroundStyle;


  if (isSelfAvatar) {
    avatarContents = <span className={classNames(`avatar-self`, styles.avatarSelf)}><Icon type={ICON_TYPE_MESSAGE} /></span>;
  }
  else if (image) {
    backgroundStyle = {backgroundImage: `url('${image}')`};
  }
  else {
    const letters = name.split(` `).map((l) => l.substr(0, 1));
    avatarClass = styles.avatarLetter;
    avatarContents = <span>{letters[0]}{letters[letters.length - 1]}</span>;
  }

  return (
    <div className={classNames(`avatar`, styles.avatar, `avatar-${size}`, styles[size], avatarClass)} style={backgroundStyle}>
      {avatarContents}
    </div>
  );
}

Avatar.propTypes = {
  image: PropTypes.string,
  isSelfAvatar: PropTypes.bool,
  name: PropTypes.string.isRequired,
  size: PropTypes.oneOf([`small`, `medium`, `large`])
};

export default Avatar;
