import {base64} from '@ciscospark/common';

export const eventNames = {
  CALLS_CREATED: `calls:created`,
  CALLS_CONNECTED: `calls:connected`,
  CALLS_DISCONNECTED: `calls:disconnected`
};

/**
 * Creates an event data object for DOM and event hooks
 *
 * @export
 * @param {Object} call
 * @param {Object} actor
 * @param {String} spaceId
 * @returns {Object}
 */
export function constructCallEventData(call, actor, spaceId) {
  let personDetails = {};
  if (actor) {
    personDetails = {
      actorId: constructHydraId(`PEOPLE`, actor.id),
      actorName: actor.name,
      personId: constructHydraId(`PEOPLE`, actor.id),
      personEmail: actor.email
    };
  }
  return {
    ...personDetails,
    roomId: constructHydraId(`ROOM`, spaceId),
    call
  };
}

function constructHydraId(type, id) {
  return base64.encode(`ciscospark://us/${type.toUpperCase()}/${id}`);
}
