import {
  applyMiddleware,
  compose,
  createStore
} from 'redux';

import thunk from 'redux-thunk';

const devtools = window.devToolsExtension || (() => (noop) => noop);

const middlewares = [thunk];

if (process.env.NODE_ENV !== 'production') {
  const {createLogger} = require('redux-logger'); // eslint-disable-line global-require
  const logger = createLogger({
    level: process.env.NODE_ENV === 'production' ? 'error' : 'info',
    duration: true,
    collapsed: false,
    logErrors: process.env.NODE_ENV === 'production'
  });
  middlewares.push(logger);
}

const enhancers = [
  applyMiddleware(...middlewares),
  devtools()
];

export default function initStore(reducers) {
  return createStore(
    reducers,
    compose(...enhancers)
  );
}
