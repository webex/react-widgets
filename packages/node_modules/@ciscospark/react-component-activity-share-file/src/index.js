import React from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';

import Button from '@ciscospark/react-component-button';
import Icon, {ICON_TYPE_DOWNLOAD, ICON_TYPE_DOCUMENT} from '@ciscospark/react-component-icon';
import {bytesToSize} from '@ciscospark/react-component-utils';

import styles from './styles.css';

function ActivityShareFile(props) {
  const {
    file,
    isPending,
    onDownloadClick
  } = props;

  const {
    displayName,
    fileSize,
    objectType
  } = file;

  function handleDownloadClick() {
    onDownloadClick(file);
  }

  let shareActions = ``;
  if (!isPending) {
    // eslint-disable-next-line no-extra-parens
    shareActions = (
      <div className={classNames(`ciscospark-share-item-actions`, styles.shareActions)}>
        <div className={classNames(`ciscospark-share-action-item`, styles.shareActionItem)}>
          <Button
            buttonClassName={styles.downloadButton}
            iconType={ICON_TYPE_DOWNLOAD}
            onClick={handleDownloadClick}
            title="Download this file"
          />
        </div>
      </div>
    );
  }

  return (
    <div className={classNames(`ciscospark-activity-share-item`, styles.shareItem)}>
      <div className={classNames(`ciscospark-share-file-icon`, styles.fileIcon)}>
        <Icon type={ICON_TYPE_DOCUMENT} />
      </div>
      <div className={classNames(`ciscospark-share-meta`, styles.meta)}>
        <div className={classNames(`ciscospark-share-file-info`, styles.fileInfo)}>
          <div className={classNames(`ciscospark-share-name`, styles.name)}>{displayName}</div>
          <div className={classNames(`ciscospark-share-file-props`, styles.fileProps)}>
            <span className={classNames(`ciscospark-share-file-size`, styles.fileSize)}>{bytesToSize(fileSize)}</span>
            <span className={classNames(`ciscospark-share-file-type`, styles.fileType)}>{objectType}</span>
          </div>
        </div>
        {shareActions}
      </div>
    </div>
  );
}

ActivityShareFile.propTypes = {
  file: PropTypes.object,
  isPending: PropTypes.bool,
  onDownloadClick: PropTypes.func
};

export default ActivityShareFile;
